# 3652. Best Time to Buy and Sell Stock using Strategy

## Approach 1 - 两个前缀和 + 枚举窗口 (推荐，好写)

![alt text](image-21.png)

1. 计算每一部分
    - A = sum[i - k]
    - B = 0
    - D = sum[n] - sum[i]
    - C = sumSell[i] - sumSell[i - k / 2]
2. B和C的中点怎么求出来的
    - (i-1+i-k+1) /2 = i - k/2

```java
class Solution {
    public long maxProfit(int[] prices, int[] strategy, int k) {
        int n = prices.length;
        long[] sum = new long[n + 1]; // price * strategy 前缀和
        long[] sumSell = new long[n + 1]; // price 前缀和
        for (int i = 0; i < n; i++) {
            sum[i + 1] = sum[i] + prices[i] * strategy[i];
            sumSell[i + 1] = sumSell[i] + prices[i];
        }

        long ans = sum[n]; // 不修改
       
        // 这里是在枚举窗口，i代表长度为k的区间的右边界（不含)
        // 窗口是 [i-k, i-1] or [i-k, i)
        // 
        for (int i = k; i <= n; i++) { 
            long res = sum[i - k] + sum[n] - sum[i] + sumSell[i] - sumSell[i - k / 2];
            ans = Math.max(ans, res);
        }
        return ans;
    }
}
```
- time: O(N)
- space: O(N)

## Approach 2 - Sliding window （推荐，空间更优，最优解, 但是不太好写）

```java

```

- time: O(N)
- space: O(1)
