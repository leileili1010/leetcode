# 370. Range Addition

## Approach - 差分数组：
- 差分数组定义：
    - 构造一个差分数组 diff，使得 diff[i] = arr[i] - arr[i-1] （其中 arr[-1] = 0）

- 区间更新：
    -  对区间 [start, end] 加上 val，只需要：
        - diff[start] += val
        - diff[end + 1] -= val （如果 end + 1 < n）

- 最后还原数组：
    - 遍历差分数组 diff，做一次前缀和 (前一项 + 当前项 or res[i-1] + res[i]) 得到结果数组。

```java
class Solution {
    public int[] getModifiedArray(int length, int[][] updates) {
        int[] res = new int[length];

        // 1. 构造差分数组 diff[i] = arr[i] - arr[i-1];
        for (int[] update : updates) {
            int value = update[2]; 
            int start = update[0];
            int end = update[1];
            
            res[start] += value; // res[start]-res[start-1] = 2
            if (end < length-1) res[end+1] -= value;
        }

        // 2. 对差分数组res做前缀来还原最终数组/答案
        int sum = 0;
        for (int i = 0; i < length; i++) {
            sum += res[i];
            res[i] = sum;
        }
        return res;
    }
}
```