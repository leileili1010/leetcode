# 528. Random Pick with Weight

这道题其实本质就是一个 加权随机抽样（sampling with weight） 的过程。直观理解:
- 假设权重数组是 w = [1, 3, 2]，那么：
    - 总和 = 1 + 3 + 2 = 6
    - 可以把它想象成把 [1,6] 这个区间分成若干段：
    - 下标 0 占据区间 [1,1]（长度 1）
    - 下标 1 占据区间 [2,4]（长度 3）
    - 下标 2 占据区间 [5,6]（长度 2）
- 那么如果我们在 [1,6] 随机生成一个数：
    - 如果落到 [1] → 选中下标 0
    - 如果落到 [2,4] → 选中下标 1
    - 如果落到 [5,6] → 选中下标 2
- 这样就保证了：权重大、区间长，被选中的概率就更高。
- 关键步骤
    - 构造prefixsum
    - 随机生成11-total之间的数
    - 找到区间返回index
        - loop through prefixsum 方法: O(n)
        - 二分法： O(logn)

## Approach 1 - prefixSum + linear search (不推荐)

```java
class Solution {
    private int[] prefixSum;
    private int total;

    public Solution(int[] w) {
        this.prefixSum = new int[w.length+1];

        for (int i = 0; i < w.length; i++) {
            this.prefixSum[i+1] = prefixSum[i] + w[i];
        }
        total = prefixSum[prefixSum.length-1];
    }
    
    public int pickIndex() {
        double target = this.total * Math.random();
        for (int i = 0; i < this.prefixSum.length; i++) {
            if (this.prefixSum[i] > target ) {
                return i-1;
            }
        }
        return 0;
    }
}

```

## Approach 2 - PrefixSum + binary search (推荐)

```java
class Solution {
    private int[] prefixSum;
    private int total;

    public Solution(int[] w) {
        this.prefixSum = new int[w.length+1];

        for (int i = 0; i < w.length; i++) {
            this.prefixSum[i+1] = prefixSum[i] + w[i];
        }
        total = prefixSum[prefixSum.length-1];
    }
    
    public int pickIndex() {
        double target = this.total * Math.random();
        int left = 0, right = prefixSum.length-1;
        int res = 0;

        while (left <= right) {
            int mid = left + (right-left)/2;
            if (prefixSum[mid] < target) {
                left = mid+1;
            } else {
                right = mid-1;
                res = mid;
            }
        }
        return res-1;
    }
}
```