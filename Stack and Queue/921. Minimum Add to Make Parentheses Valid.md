# 921. Minimum Add to Make Parentheses Valid

## Approach 1 - 最优解法

一个介绍过很多次的做法 : 将「有效括号问题」转化为「分值有效性」的数学判定。

使用 score 代指处理过程中的得分，将 ( 记为 +1，将 ) 记为 -1。

一个有效的括号应当在整个过程中不出现负数，因此一旦 score 出现负数，我们需要马上增加 ( 来确保合法性；当整个 s 处理完后，还需要添加 socre 等同的 ) 来确保合法性。

```java
class Solution {
    public int minAddToMakeValid(String s) {
        int score = 0, ans = 0;
        for (char c : s.toCharArray()) {
            score += c == '(' ? 1 : -1;
            if (score < 0) {
                score = 0; ans++;
            }
        }
        return ans + score;
    }
}
```
- Time: O(N)
- Space: O(1)

## Approach 2 - stack

```java
class Solution {
    public int minAddToMakeValid(String s) {
        Deque<Character> stack = new ArrayDeque<>();

        for (char c: s.toCharArray()) {
            // 只有一种情况需要pop
            if (!stack.isEmpty() && stack.peek() == '(' && c == ')') {
                stack.pop();
            } else {
                stack.push(c);
            }
        }

        return stack.size();
    }
}
```
- Time: O(N)
- Space: O(N)
