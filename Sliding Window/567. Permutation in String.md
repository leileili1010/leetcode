# 567. Permutation in String

## Approach 1

- ç§»åŠ¨ä¸€ä¸ªå›ºå®šé•¿åº¦çš„çª—å£
- æŠŠpermutationçš„é—®é¢˜ç›´æ¥è½¬æ¢æ¯”è¾ƒä¸¤ä¸ªcount character freqçš„arrayæ˜¯å¦ç›¸ç­‰
- s1Count and s2count have fixed length 26, so comparison between those two arrays is O(1) time.

```java
class Solution {
    public boolean checkInclusion(String s1, String s2) {
        if (s1.length() > s2.length()) return false;
        int windowSize = s1.length();
        int[] s1Count = new int[26];    
        int[] s2Count = new int[26];    
    
        for (int i = 0; i < windowSize; i++) {
            s1Count[s1.charAt(i)-'a']++;
            s2Count[s2.charAt(i)-'a']++;
        }

        if (Arrays.equals(s1Count, s2Count)) return true;

        for (int i = windowSize; i < s2.length(); i++) {
            s2Count[s2.charAt(i)-'a']++;
            s2Count[s2.charAt(i-windowSize)-'a']--;
            if (Arrays.equals(s1Count, s2Count)) return true; // O(1)
        }
        return false;
    }
}
```
- Time Complexity: O(s2.length) (efficient for large inputs)
- Space Complexity: O(1) (only constant extra space used)

- çµå±±èŒ¶è‰¾åºœå†™æ³•
```java
class Solution {
    public boolean checkInclusion(String s1, String s2) {
        int m = s1.length();
        if (m > s2.length()) {
            return false;
        }

        // ç»Ÿè®¡ s1 çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°
        int[] cntS1 = new int[26];
        for (char c : s1.toCharArray()) {
            cntS1[c - 'a']++;
        }

        char[] s = s2.toCharArray();
        int[] cntT = new int[26]; // å¯¹äº s2 çš„é•¿ä¸º m çš„å­ä¸² tï¼Œç»Ÿè®¡ t çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°
        for (int i = 0; i < s.length; i++) {
            // 1. è¿›å…¥çª—å£
            cntT[s[i] - 'a']++;
            if (i < m - 1) { // çª—å£å¤§å°ä¸è¶³ m
                continue;
            }
            // 2. åˆ¤æ–­å­ä¸² t çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°æ˜¯å¦å‡ä¸ s1 çš„ç›¸åŒ
            if (Arrays.equals(cntS1, cntT)) {
                return true;
            }
            // 3. ç¦»å¼€çª—å£ï¼Œä¸ºä¸‹ä¸€ä¸ªå¾ªç¯åšå‡†å¤‡
            cntT[s[i - m + 1] - 'a']--;
        }
        return false;
    }
}
```

## Approach 2 - å¯¹approach 1çš„ä¼˜åŒ–ï¼ˆæ¨èï¼Œä½†æ˜¯æ¯”è¾ƒéš¾æƒ³ï¼‰
![alt text](image-26.png)


è¿™æ˜¯å¯¹ä¸Šä¸€ç‰ˆ **O(26 * N)** è§£æ³•çš„ä¼˜åŒ–ç‰ˆæœ¬ã€‚ä¸Šä¸€ç‰ˆåšæ³•æ˜¯åœ¨ `s2` çš„æ¯ä¸ªçª—å£éƒ½å¯¹æ¯”æ•´ä¸ª freq arrayï¼Œå› æ­¤æœ‰å¸¸æ•° 26ã€‚

ä¸ºäº†åšåˆ° **çœŸæ­£çš„ O(N)**ï¼Œæˆ‘ä»¬åœ¨æ»‘åŠ¨çª—å£ä¸­ **ä¸å†æ¯æ¬¡æ¯”è¾ƒä¸¤ä¸ª frequency array**ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå…³é”®å˜é‡ï¼š

### ğŸ§© `less` â€”â€” è®°å½•è¿˜å‰©å¤šå°‘ç§ unique å­—ç¬¦æ²¡æœ‰å‡‘é½

- å…ˆå¯¹ `s1` ç»Ÿè®¡ frequencyã€‚
- ç»Ÿè®¡ `s1` é‡Œæœ‰å¤šå°‘ç§ä¸åŒçš„å­—ç¬¦ï¼Œä¾‹å¦‚ `a, b, e` â‡’ `less = 3`ã€‚
- æ»‘åŠ¨çª—å£éå† `s2`ï¼Œæ¯é‡åˆ°ä¸€ä¸ªæ–°è¿›å…¥çª—å£çš„å­—ç¬¦ï¼Œåšä¸€æ¬¡ freq--ã€‚
- **å½“æŸä¸ªå­—ç¬¦ freq ä» 1 å˜æˆ 0 æ—¶ï¼Œè¯´æ˜è¿™ä¸ªå­—ç¬¦å®Œå…¨å‡‘é½ â†’ `less--`**ã€‚
- åªè¦ `less == 0`ï¼Œè¯´æ˜å½“å‰çª—å£å®Œå…¨åŒ…å«äº† `s1` æ‰€éœ€çš„æ‰€æœ‰å­—ç¬¦ â†’ return `true`ã€‚


## ğŸƒâ€â™‚ï¸ Sliding Window è¿‡ç¨‹ï¼ˆè¿›å…¥çª—å£ vs ç¦»å¼€çª—å£ï¼‰

1. **çª—å£å³ä¾§è¿›å…¥æ–°å­—ç¬¦ï¼ˆinCharï¼‰**

count[inChar]--

è‹¥ count[inChar] == 0ï¼Œè¯´æ˜åˆšå¥½å‡‘é½ â†’ less--


2. çª—å£å·¦ä¾§ç§»å‡ºæ—§å­—ç¬¦ï¼ˆoutCharï¼‰

è‹¥ count[outChar] == 0ï¼Œè¯´æ˜åŸæœ¬æ˜¯å®Œå…¨å‡‘é½çš„ï¼Œæ­¤æ—¶ç§»å‡ºä¼šç ´å â†’ less++  

ç„¶åå† count[outChar]++

```java
class Solution {
    public boolean checkInclusion(String s1, String s2) {
        int m = s1.length();
        if (m > s2.length()) {
            return false;
        }

        int[] cnt = new int[26];
        int less = 0;
        for (char c : s1.toCharArray()) {
            if (cnt[c - 'a'] == 0) {
                less++;
            }
            cnt[c - 'a']++;
        }

        char[] s = s2.toCharArray();
        for (int i = 0; i < s.length; i++) {
            // 1. è¿›å…¥çª—å£
            int c = s[i] - 'a';
            cnt[c]--;
            if (cnt[c] == 0) {
                less--;
            }

            if (i < m - 1) { // çª—å£å¤§å°ä¸è¶³ m
                continue;
            }

            // 2. åˆ¤æ–­å­ä¸² t çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°æ˜¯å¦å‡ä¸ s1 çš„ç›¸åŒ
            if (less == 0) {
                return true;
            }

            // 3. ç¦»å¼€çª—å£ï¼Œä¸ºä¸‹ä¸€ä¸ªå¾ªç¯åšå‡†å¤‡
            int out = s[i - m + 1] - 'a';
            if (cnt[out] == 0) {
                less++;
            }
            cnt[out]++;
        }
        return false;
    }
}
```